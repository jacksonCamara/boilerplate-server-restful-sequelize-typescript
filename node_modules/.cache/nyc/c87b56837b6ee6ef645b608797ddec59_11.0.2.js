"use strict";var cov_2n6rgbp6my=function(){var path="C:\\Users\\Jackson\\Desktop\\typescript-course\\build\\server\\auth.js",hash="a9c7961ae109732887c873650d8f3f7eaaf153d3",global=new Function('return this')(),gcv="__coverage__",coverageData={path:"C:\\Users\\Jackson\\Desktop\\typescript-course\\build\\server\\auth.js",statementMap:{"0":{start:{line:2,column:15},end:{line:2,column:34}},"1":{start:{line:3,column:21},end:{line:3,column:44}},"2":{start:{line:4,column:16},end:{line:4,column:53}},"3":{start:{line:5,column:13},end:{line:5,column:45}},"4":{start:{line:7,column:25},end:{line:7,column:48}},"5":{start:{line:8,column:15},end:{line:11,column:5}},"6":{start:{line:12,column:4},end:{line:26,column:8}},"7":{start:{line:13,column:8},end:{line:25,column:11}},"8":{start:{line:15,column:12},end:{line:20,column:13}},"9":{start:{line:16,column:16},end:{line:19,column:19}},"10":{start:{line:21,column:12},end:{line:21,column:37}},"11":{start:{line:24,column:12},end:{line:24,column:30}},"12":{start:{line:27,column:4},end:{line:34,column:6}},"13":{start:{line:29,column:12},end:{line:29,column:41}},"14":{start:{line:32,column:12},end:{line:32,column:68}},"15":{start:{line:36,column:0},end:{line:36,column:62}},"16":{start:{line:37,column:0},end:{line:37,column:29}}},fnMap:{"0":{name:"AuthConfig",decl:{start:{line:6,column:9},end:{line:6,column:19}},loc:{start:{line:6,column:22},end:{line:35,column:1}},line:6},"1":{name:"(anonymous_1)",decl:{start:{line:12,column:51},end:{line:12,column:52}},loc:{start:{line:12,column:79},end:{line:26,column:5}},line:12},"2":{name:"(anonymous_2)",decl:{start:{line:14,column:18},end:{line:14,column:19}},loc:{start:{line:14,column:37},end:{line:22,column:9}},line:14},"3":{name:"(anonymous_3)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:36},end:{line:25,column:9}},line:23},"4":{name:"(anonymous_4)",decl:{start:{line:28,column:20},end:{line:28,column:21}},loc:{start:{line:28,column:32},end:{line:30,column:9}},line:28},"5":{name:"(anonymous_5)",decl:{start:{line:31,column:22},end:{line:31,column:23}},loc:{start:{line:31,column:34},end:{line:33,column:9}},line:31}},branchMap:{"0":{loc:{start:{line:15,column:12},end:{line:20,column:13}},type:"if",locations:[{start:{line:15,column:12},end:{line:20,column:13}},{start:{line:15,column:12},end:{line:20,column:13}}],line:15}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var passport=(++cov_2n6rgbp6my.s[0],require("passport"));var passport_jwt_1=(++cov_2n6rgbp6my.s[1],require("passport-jwt"));var service_1=(++cov_2n6rgbp6my.s[2],require("./modules/Clientes/service"));var config=(++cov_2n6rgbp6my.s[3],require('./config/env/config')());function AuthConfig(){++cov_2n6rgbp6my.f[0];var ClienteService=(++cov_2n6rgbp6my.s[4],new service_1.default());var opts=(++cov_2n6rgbp6my.s[5],{secretOrKey:config.secret,jwtFromRequest:passport_jwt_1.ExtractJwt.fromAuthHeader()});++cov_2n6rgbp6my.s[6];passport.use(new passport_jwt_1.Strategy(opts,function(jwtPayload,done){++cov_2n6rgbp6my.f[1];++cov_2n6rgbp6my.s[7];ClienteService.getById(jwtPayload.id).then(function(cliente){++cov_2n6rgbp6my.f[2];++cov_2n6rgbp6my.s[8];if(cliente){++cov_2n6rgbp6my.b[0][0];++cov_2n6rgbp6my.s[9];return done(null,{id:cliente.id,email:cliente.email});}else{++cov_2n6rgbp6my.b[0][1];}++cov_2n6rgbp6my.s[10];return done(null,false);}).catch(function(error){++cov_2n6rgbp6my.f[3];++cov_2n6rgbp6my.s[11];done(error,null);});}));++cov_2n6rgbp6my.s[12];return{initialize:function(){++cov_2n6rgbp6my.f[4];++cov_2n6rgbp6my.s[13];return passport.initialize();},authenticate:function(){++cov_2n6rgbp6my.f[5];++cov_2n6rgbp6my.s[14];return passport.authenticate('jwt',{session:false});}};}++cov_2n6rgbp6my.s[15];Object.defineProperty(exports,"__esModule",{value:true});++cov_2n6rgbp6my.s[16];exports.default=AuthConfig;//# sourceMappingURL=auth.js.map